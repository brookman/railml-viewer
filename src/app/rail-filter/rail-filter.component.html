<mat-card>
  <mat-card-title>Filter</mat-card-title>
  <mat-card-content fxLayout="column" fxLayoutGap="2em">

    <div fxLayout="row" fxLayoutGap="2em" fxLayoutAlign="start center">
      <mat-form-field>
        <mat-label>Train number filter</mat-label>
        <input matInput placeholder="1234" type="text" [(ngModel)]="filter.trainNumber" (ngModelChange)="sendUpdate()">
        <button mat-button *ngIf="filter.trainNumber" matSuffix mat-icon-button aria-label="Clear" (click)="clearTrainNumber()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
      <mat-checkbox [(ngModel)]="filter.showRelated" (ngModelChange)="sendUpdate()">Show related trains</mat-checkbox>
    </div>

    <div fxLayout="row" fxLayoutGap="2em" fxLayoutAlign="start center">

      <mat-form-field fxFlex="0 0">
        <mat-label>Operating periods</mat-label>
        <mat-select [formControl]="opControl" (selectionChange)="onSelectionChange($event)" multiple>

          <mat-select-trigger>
            <mat-chip-list>
              <mat-chip *ngFor="let op of opControl.value" [removable]="true" (removed)="onOpRemoved(op)">
                <span matTooltip="{{op.description}}">{{op.name}} ({{op.id}})</span>
                <mat-icon matChipRemove>cancel</mat-icon>
              </mat-chip>
            </mat-chip-list>
          </mat-select-trigger>

          <mat-option *ngFor="let op of opList" [value]="op">{{op.name}} ({{op.id}}) - {{op.description}}</mat-option>

        </mat-select>
      </mat-form-field>

      <button mat-icon-button color="basic" (click)="clearSelection()">
        <mat-icon>clear</mat-icon>
      </button>

      <mat-form-field>
        <mat-label>Combine operation</mat-label>
        <mat-select [(value)]="filter.combineOperation" (selectionChange)="sendUpdate()">
          <mat-option value="{{'Intersect'}}">Intersect (AND)</mat-option>
          <mat-option value="{{'Union'}}">Union (OR)</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-checkbox [(ngModel)]="filter.outsideOpGreyedOut" (ngModelChange)="sendUpdate()">Outside OP greyed out</mat-checkbox>

    </div>

    <div fxLayout="row" fxLayoutGap="0em" fxLayoutAlign="start center" *ngIf="combinedBitMask">
      <span style="font-size: 7px">{{combinedBitMask}}</span>
    </div>

  </mat-card-content>
</mat-card>

